â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘         ğŸš€ COPY THIS TO VAPI DASHBOARD NOW! ğŸš€              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… NGROK IS RUNNING!

Your Public URL: https://872444cf83d2.ngrok-free.app

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”§ STEP-BY-STEP SETUP IN VAPI DASHBOARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Go to: https://dashboard.vapi.ai

2. Login with your credentials

3. Navigate to: Assistants

4. Find your assistant:
   - Assistant ID: e1c04a87-a8cf-4438-a91b-5888f69d1ef2
   - Name: Alex / Attar Travel

5. Click on the assistant to edit

6. Go to: "Functions" or "Tools" tab

7. Add/Edit "search_flights" function:

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ CONFIGURATION TO PASTE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Function Name:
  search_flights

Server URL (COPY THIS EXACT URL):
  https://872444cf83d2.ngrok-free.app/webhooks/vapi

Method:
  POST

Function Schema (JSON):
{
  "type": "function",
  "function": {
    "name": "search_flights",
    "description": "Search for available flights between two cities on a specific date. Returns real-time flight options with prices, airlines, and schedules.",
    "parameters": {
      "type": "object",
      "properties": {
        "origin": {
          "type": "string",
          "description": "Origin city name (e.g., Bangalore, Mumbai, Delhi)"
        },
        "destination": {
          "type": "string",
          "description": "Destination city name (e.g., Jeddah, Dubai, Riyadh)"
        },
        "departure_date": {
          "type": "string",
          "description": "Departure date in YYYY-MM-DD format (e.g., 2025-12-15)"
        },
        "return_date": {
          "type": "string",
          "description": "Return date in YYYY-MM-DD format (optional, for round-trip)"
        },
        "passengers": {
          "type": "integer",
          "description": "Number of passengers",
          "default": 1,
          "minimum": 1,
          "maximum": 9
        },
        "cabin_class": {
          "type": "string",
          "description": "Cabin class preference",
          "enum": ["economy", "business", "first"],
          "default": "economy"
        }
      },
      "required": ["origin", "destination", "departure_date"]
    }
  }
}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ§ª TEST THE WEBHOOK (Optional - Before Dashboard Config)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Run this in terminal to verify webhook works:

curl -X POST https://872444cf83d2.ngrok-free.app/webhooks/vapi \
  -H "Content-Type: application/json" \
  -d '{
    "type": "function-call",
    "functionCall": {
      "name": "search_flights",
      "parameters": {
        "origin": "Bangalore",
        "destination": "Jeddah",
        "departure_date": "2025-12-15",
        "passengers": 1,
        "cabin_class": "economy"
      }
    }
  }'

Expected Response: JSON with flights array

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“± VAPI DASHBOARD SCREENSHOTS GUIDE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Location in Dashboard:
  Dashboard â†’ Assistants â†’ [Your Assistant] â†’ Functions

What to Fill:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Function Name:                                      â”‚
  â”‚ search_flights                                      â”‚
  â”‚                                                     â”‚
  â”‚ Server URL:                                         â”‚
  â”‚ https://872444cf83d2.ngrok-free.app/webhooks/vapi  â”‚
  â”‚                                                     â”‚
  â”‚ Method:                                             â”‚
  â”‚ POST                                                â”‚
  â”‚                                                     â”‚
  â”‚ Function Schema:                                    â”‚
  â”‚ [Paste the JSON above]                             â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Save Button: Click "Save" or "Update"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… AFTER CONFIGURATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Wait 10-30 seconds for Vapi to sync

2. Test your widget:
   - Open: http://localhost:8080 (or your widget URL)
   - Click "Talk with AI"
   - Say: "Show me flights from Bangalore to Jeddah"
   
3. Alex should:
   - Say: "Let me search for flights..."
   - Call your backend via ngrok
   - Show flight cards! âœˆï¸

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ” MONITOR REQUESTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Terminal 1 - Backend Logs:
  tail -f vapivoice/logs/backend.log

Terminal 2 - ngrok Web Interface:
  Open: http://127.0.0.1:4040
  Shows all incoming requests in real-time

When Vapi calls your backend, you'll see:
  âœ… "Vapi webhook received: function-call"
  âœ… "Function: search_flights"
  âœ… "Parameters: {origin: Bangalore, destination: Jeddah}"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âš ï¸ IMPORTANT NOTES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Keep ngrok running:
   - Don't close the terminal
   - If you restart ngrok, the URL changes
   - You'll need to update Vapi dashboard with new URL

2. Keep backend running:
   - Backend must be on port 4000
   - Check with: curl http://localhost:4000/health

3. URL changes:
   - Free ngrok URLs change on restart
   - Paid ngrok gives you static URLs
   - Update Vapi each time URL changes

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ› TROUBLESHOOTING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Issue: "Alex says she can't retrieve flights"
  âœ… Check ngrok is running: curl http://127.0.0.1:4040/status
  âœ… Check backend is running: curl http://localhost:4000/health
  âœ… Check URL in Vapi dashboard matches ngrok URL
  âœ… Check function name is exactly "search_flights"

Issue: "No flight cards appear"
  âœ… Check backend logs for incoming requests
  âœ… Check ngrok dashboard for webhook calls
  âœ… Verify Server URL in Vapi ends with /webhooks/vapi
  âœ… Test webhook directly with curl command above

Issue: "Error 502 Bad Gateway"
  âœ… Backend not running - restart it
  âœ… Check port 4000 is not blocked

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¯ QUICK CHECKLIST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Before testing, verify:
  â˜ ngrok is running (check http://127.0.0.1:4040)
  â˜ Backend is running on port 4000
  â˜ Server URL configured in Vapi dashboard
  â˜ Function name is "search_flights" (exact match)
  â˜ Function schema pasted correctly
  â˜ Changes saved in Vapi dashboard

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ VAPI SUPPORT (If Needed)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

If configuration is unclear:
  - Vapi Dashboard: https://dashboard.vapi.ai
  - Vapi Docs: https://docs.vapi.ai
  - Discord: https://discord.gg/vapi

Your Setup:
  Assistant ID: e1c04a87-a8cf-4438-a91b-5888f69d1ef2
  Public Key: 577ae6b3-53b9-4a37-b6f6-74e8e8808368
  Webhook URL: https://872444cf83d2.ngrok-free.app/webhooks/vapi

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸš€ YOU'RE READY!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. âœ… Backend running
2. âœ… ngrok exposing backend
3. ğŸ“‹ Copy webhook URL above
4. ğŸ”§ Paste in Vapi dashboard
5. ğŸ‰ Test and see flights!

Your Webhook URL:
  ğŸ‘‰ https://872444cf83d2.ngrok-free.app/webhooks/vapi

Go configure Vapi now! ğŸš€âœˆï¸

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

